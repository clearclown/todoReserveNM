# Todoアプリ研修プロジェクト テスト項目表

本項目表は、Todoアプリ研修プロジェクトにおけるテストケースの一覧です。単体テスト、結合テスト、およびセキュリティテストの観点で項目を整理しています。各テスト項目には、優先度（高=重要度高、中、低）、必須/任意の区分、およびテストの基準や目標値を示しています。QAエンジニアとセキュリティエンジニアは本一覧を基にテストコードを作成し、開発者はこれらテストをパスすることを目標に実装を行います。

## 単体テスト項目 (Unit Tests)

| No. | テスト項目                                                                                                            | 優先度 | 必須/任意 | テスト基準・期待結果                                                                                                                                    |
| --- | ---------------------------------------------------------------------------------------------------------------- | --- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **フォーム入力バリデーション（タイトル必須）**<br>新規ToDo作成フォームでタイトルを空欄にして送信した場合に、バリデーションエラーメッセージが表示され、ToDoが作成されないこと。                  | 高   | 必須    | フロントエンドのバリデーション関数が正しく動作し、タイトル未入力時にエラー表示。エラー文言が所定どおり出力されることを確認。                                                                                |
| 2   | **タイトル文字数制限チェック**<br>タイトルが許容最大長（例：100文字）を超える場合、フロントエンドおよびバックエンドの双方でリジェクトされること。                                   | 中   | 必須    | 101文字のタイトルを入力し送信すると、フロントでは送信ボタンが無効になるかエラー表示。バックエンドにも渡らない or 渡った場合400エラーとなること。エラーメッセージに「タイトルは100文字以内」等表示。                                      |
| 3   | **ToDo一覧コンポーネント表示**<br>ToDo一覧コンポーネントに5件のToDoデータを与えた場合、画面上に5件すべてのタイトルと詳細が正しく表示されること。                              | 中   | 必須    | モックのToDoリストデータ（5件）をコンポーネントに与えレンダリングし、期待どおり5件の項目がDOM上に生成されていることを確認（各タイトルテキストが一致）。                                                              |
| 4   | **ToDo完了状態トグル処理**<br>ToDoアイテムの「完了」ボタン押下時に状態が切り替わる内部ロジックのテスト。                                                     | 高   | 必須    | Jotai等の状態管理でToDoの `completed` フラグが false→true に変更されること、および対象のToDoが未完了リストから完了リストのデータ構造へ移動する関数が正しく動作することを単体テストで検証。                              |
| 5   | **バックエンドAPI: ToDo作成処理**<br>バックエンドのToDo作成サービス（またはコントローラ）に有効な入力を与えた場合、正しくデータベースに保存されIDが発番されること。無効な入力ではエラーをスローすること。 | 高   | 必須    | サービス層の関数に（タイトル="Test Task"等）正常データを渡し実行後、戻り値として新規ToDoオブジェクト（ID採番済み）が返ることを確認。タイトル空など無効データでは例外が発生し、HTTP 400が返される想定を確認。                           |
| 6   | **バックエンドAPI: ToDo更新処理**<br>ToDo完了状態を更新するAPIが期待通り動作することのテスト。                                                      | 中   | 必須    | 既存ToDoの `completed` フィールドを false→true に更新するAPI呼び出しをモックし、返却値のステータスコード200、および更新後オブジェクトの `completed=true` を確認。別ユーザーのToDoを更新しようとした場合は403エラーとなること。 |
| 7   | **認証モジュール: ログイン認証**<br>正しい資格情報を入力した場合に認証が成功しトークンまたはセッションIDが取得できること、誤った場合にエラーが返ること。                               | 高   | 必須    | Authサービスの関数に有効なユーザー資格情報を渡すとJWTトークン文字列が返ることを確認。無効なパスワードの場合、戻り値がfalseまたは例外が発生し、HTTP 401が返却されることを確認。                                             |

## 結合テスト項目 (Integration Tests)

| No. | テスト項目                                                            | 優先度 | 必須/任意 | テスト基準・シナリオ                                                                                                                                        |
| --- | ---------------------------------------------------------------- | --- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **ユーザー新規登録からログインまで**<br>新規ユーザー登録→ログイン→ToDo一覧画面表示までの一連のシナリオテスト。   | 高   | 必須    | ユーザーがサインアップフォームで必要情報を入力し登録、その後ログインフォームで認証してToDo一覧ページに遷移する。一連のフローがエラーなく完了し、新規登録ユーザーのToDo一覧が空で表示されることを確認。                                           |
| 2   | **ToDo登録フロー**<br>画面上でToDoを1件追加し、その内容がバックエンドDBに保存され一覧に表示されるまでの検証。 | 高   | 必須    | ToDo一覧ページで「新規追加」操作を行い、タイトル「Task A」を入力して登録。画面に「Task A」が追加表示されることを確認。またバックエンドのAPIレスポンスが201 Createdであり、データベースに該当レコードが作成されていることを確認。                   |
| 3   | **ToDo編集フロー**<br>既存ToDoのタイトルと詳細を編集する操作の結合テスト。                    | 中   | 必須    | 事前に存在するToDo「Task B」を「Task B（更新）」にタイトル変更し保存。画面上で当該ToDoのタイトルが更新されていること、バックエンドAPIから200 OKが返りデータベース上でも変更が反映されていることを確認。                                |
| 4   | **ToDo完了操作フロー**<br>ToDoを完了にし、完了リストに移動させる一連のシナリオをテスト。             | 高   | 必須    | 未完了ToDo「Task C」を完了ボタン押下→画面上から「Task C」が未完了リストから消え、完了済みリストに表示されることを確認。再度「未完了に戻す」操作を行うと未完了リストに戻ることも確認する。各操作時にバックエンドAPIが適切なステータスを返し、DB上の状態も更新されていること。 |
| 5   | **ToDo削除フロー**<br>ToDoを削除する操作の結合テスト。                              | 中   | 必須    | 未完了ToDo「Task D」を削除操作→確認ダイアログ承諾→一覧から「Task D」が消えることを確認。バックエンドAPIが204 No Contentまたは200を返し、DBから該当レコードが削除されていることを検証。削除後に同じIDで取得を試みても存在しない（404）ことを確認。   |
| 6   | **他ユーザーのデータアクセス遮断**<br>認可が正しく機能し、別ユーザーのToDoにアクセスできないことを確認する。     | 高   | 必須    | ユーザーAでログイン中に、直接APIエンドポイントにユーザーBのToDo IDを指定して取得/編集/削除を試みる。すべてのケースでバックエンドAPIが403 Forbiddenまたは404を返し、UI上もエラー表示され他人のデータは閲覧・変更できないことを確認。               |
| 7   | **カテゴリフィルタ機能の結合テスト** *(カテゴリ機能実装時)*<br>カテゴリ別表示が正しく機能することのテスト。     | 中   | 任意    | （カテゴリ機能が実装されている場合）複数のToDoにカテゴリAとBを設定。画面のカテゴリフィルタでAを選ぶとカテゴリAのToDoのみ一覧表示されること、カテゴリBを選ぶとそのToDoのみ表示されることを確認。未分類のToDoがフィルタで除外されることも確認。                 |
| 8   | **パフォーマンステスト（ToDo一覧表示）**<br>多数のToDoがある状態での表示性能を検証。               | 中   | 任意    | テストデータとして50件のToDoを登録した状態で一覧ページにアクセスし、ページロード時間を計測。目標である3秒以内で表示されることを確認（開発用PCのローカル環境で測定）。もし3秒を超える場合は、ページネーションやLazyロード等が機能しているか確認し、性能改善を検討。          |

## セキュリティテスト項目 (Security Tests)

| No. | テスト項目                                                            | 優先度 | 必須/任意 | テスト基準・内容                                                                                                                                                                  |
| --- | ---------------------------------------------------------------- | --- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | **未認証時のアクセス制御**<br>ログインしていない状態で保護されたAPI/ページにアクセスした場合、適切に拒否されること。 | 高   | 必須    | 認証が必要なエンドポイント（例：`/api/todos`）にトークンなしでリクエストを送信し、HTTP 401 Unauthorizedが返ることを確認。フロントエンドではログイン画面にリダイレクトされること。                                                                 |
| 2   | **認可制御**<br>他ユーザーのリソースに対する不正アクセスができないこと（結合テスト項目6と関連）。            | 高   | 必須    | ユーザーAのトークンでユーザーBのToDo取得や更新を試みても、サーバから403 Forbiddenまたは404 Not Foundが返されることを確認。データベース上でもAのクエリではBのデータが一切取得できないクエリになっていること（ORMのスコープ適用）を確認。                                    |
| 3   | **パスワードハッシュ保管確認**<br>ユーザー登録後のパスワードがハッシュ化されて保存されていることを確認する。       | 高   | 必須    | 新規ユーザー登録後、データベースのユーザーテーブルを直接確認し、平文パスワードが保存されていないことを検証（ハッシュらしき文字列であること）。可能ならハッシュを再ハッシュしてログイン検証を行い、元のパスワード無しでは認証できないことを確認。                                                  |
| 4   | **SQLインジェクション対策確認**<br>入力フィールドにSQL構文を挿入する攻撃への耐性を検証。              | 中   | 必須    | ToDoタイトルに `'); DROP TABLE todos;--` のような文字列を入力して登録・編集を試みる。アプリがエラーを適切に処理し、データ破壊が起きないこと、予期せぬ動作をしないことを確認。エラーメッセージが含まれていても内部のSQL文などが漏洩しないことも確認。                               |
| 5   | **XSS脆弱性確認**<br>スクリプトタグなどを入力した際の挙動を検証する。                         | 中   | 必須    | ToDoのタイトルまたは詳細に `<script>alert('XSS');</script>` を含む文字列を入力して登録し、一覧画面を表示。画面表示時にアラートが発生しないこと（スクリプトが実行されていないこと）を確認。表示上は `<script>...</script>` が無害化されて表示されるか、除去されていることを確認する。 |
| 6   | **脆弱性スキャン**<br>依存ライブラリや設定に既知のセキュリティ問題がないかをチェックする。                | 低   | 任意    | `npm audit` やGitHub Dependabotによるスキャンを実行し、高深刻度の脆弱性が検出されないことを確認。検出された場合は可能な限りバージョンアップや対策を行い、再度実行して0件になることを目指す。                                                             |
| 7   | **負荷に対する耐性**<br>大量リクエストや大きな入力によるサービス影響を検証。                       | 低   | 任意    | 極端に大きなサイズのToDo詳細（例：10万文字）を送信してAPIがどのように応答するか確認（通常はバリデーションで弾かれる）。また、短時間に多数のAPIリクエスト（例えば1秒間に50リクエスト）を送ってサーバが適切に処理できるか（レート制限やタイムアウトにならないか）を確認。                               |

各テスト項目について、**高優先度かつ必須**の項目は研修期間内に必ずテストが通るよう実装しなければなりません。**任意**項目や低優先度の項目は時間に余裕があれば対応します。テスト結果はGitHub Actions上の自動テストや手動テストレポートとして記録し、研修終了時に全員で確認・振り返りを行います。これにより、参加者はソフトウェアの品質保証プロセスについても理解を深めることが期待されます。
